ARM GAS  1.s 			page 1


   1              		@单片机：N32G430C8L7
   2              		@功能：频率相位可调SPWM
   3              		@作者：yjmwxwx
   4              		@时间：20220726
   5              		@编译器：arm-none-eabi
   6              		.thumb
   7              		.syntax unified
   8              	.section .text
   9              	vectors:					@向量表
  10 0000 00400020 		.word STACHINIT	
  11 0004 11010000 		.word _start + 1			@复位向量
  12 0008 33040000 	        .word _nmi_handler + 1 
  13 000c 33040000 	        .word _hard_fault + 1 
  14 0010 33040000 	        .word _memory_fault + 1 
  15 0014 33040000 	        .word _bus_fault + 1
  16 0018 33040000 	        .word _usage_fault + 1
  17 001c 00000000 		.word 0
  18 0020 00000000 		.word 0
  19 0024 00000000 		.word 0
  20 0028 00000000 		.word 0
  21 002c 33040000 		.word aaa +1 @_svc_handler + 1
  22 0030 33040000 		.word aaa +1 @_debugmon_handler + 1
  23 0034 00000000 		.word 0
  24 0038 33040000 		.word aaa +1 @_pendsv_handler + 1
  25 003c 33040000 		.word aaa +1 @_systick_handler +1
  26              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  27 0040 33040000 		.word aaa +1 @0 _wwdg +1
  28 0044 33040000 		.word aaa +1 @1 _pvd +1
  29 0048 33040000 		.word aaa +1 @2 _rtc_tamper_stamp +1
  30 004c 33040000 		.word aaa +1 @3 _rtc_wkup +1
  31 0050 33040000 		.word aaa +1 @4 _flash +1
  32 0054 33040000 		.word aaa +1 @5 _rcc +1
  33 0058 33040000 		.word aaa +1 @6 _exti0 +1
  34 005c 33040000 		.word aaa +1 @7 _exti1 +1
  35 0060 33040000 		.word aaa +1 @8 _exti2 +1
  36 0064 33040000 		.word aaa +1 @9 _exti3 +1
  37 0068 33040000 		.word aaa +1 @10 _exti4 +1
  38 006c 33040000 		.word aaa +1 @11 _dma_channel1 +1
  39 0070 33040000 		.word aaa +1 @12 _dma_channel2 +1
  40 0074 33040000 		.word aaa +1 @13 _dma_channel3 +1
  41 0078 33040000 		.word aaa +1 @14 _dma_channel4 +1
  42 007c 33040000 		.word aaa +1 @15 _dma_channel5 +1
  43 0080 33040000 		.word aaa +1 @16 _dma_channel6 +1
  44 0084 33040000 		.word aaa +1 @17 _dma_channel7 +1
  45 0088 33040000 		.word aaa +1 @18 _dma_channel8 +1
  46 008c 33040000 		.word aaa +1 @19 _adc +1
  47 0090 33040000 		.word aaa +1 @20 _mmu +1
  48 0094 33040000 		.word aaa +1 @21 _comp_1_2_3 +1
  49 0098 33040000 		.word aaa +1 @22 _exti9_5 +1
  50 009c 33040000 		.word aaa +1 @23 _tim1_brk +1
  51 00a0 33040000 		.word aaa +1 @24 _tim1_up +1
  52 00a4 33040000 		.word aaa +1 @25 _tim1_trg_com +1
  53 00a8 33040000 		.word aaa +1 @26 _tim1_cc +1
  54 00ac 33040000 		.word aaa +1 @28 _tim2 +1
  55 00b0 33040000 		.word aaa +1 @29 _tim3 +1
  56 00b4 33040000 		.word aaa +1 @30 _tim4 +1
  57 00b8 33040000 		.word aaa +1 @31 _i2c1_ev +1
ARM GAS  1.s 			page 2


  58 00bc 33040000 		.word aaa +1 @32 _i2c1_er +1
  59 00c0 33040000 		.word aaa +1 @33 _i2c2_ev +1
  60 00c4 33040000 		.word aaa +1 @34 _i2c2_er +1
  61 00c8 33040000 		.word aaa +1 @35 _spi1 +1
  62 00cc 33040000 		.word aaa +1 @36 _spi2 +1
  63 00d0 33040000 		.word aaa +1 @37 _usart1 +1
  64 00d4 33040000 		.word aaa +1 @38 _usart2 +1
  65 00d8 33040000 		.word aaa +1 @39 _uart3 +1
  66 00dc 33040000 		.word aaa +1 @40 _exti15_10 +1
  67 00e0 33040000 		.word aaa +1 @41 _rtcalarm +1
  68 00e4 33040000 		.word aaa +1 @42 _lptim_wkup +1
  69 00e8 33040000 		.word aaa +1 @43 _tim8_brk +1
  70 00ec 33040000 		.word aaa +1 @44 _tim8_up +1
  71 00f0 33040000 		.word aaa +1 @45 _tim8_cc +1
  72 00f4 33040000 		.word aaa +1 @46 _uart4 +1
  73 00f8 33040000 		.word aaa +1 @47 _tim5 +1
  74 00fc 33040000 		.word aaa +1 @48 _tim6 +1
  75 0100 33040000 		.word aaa +1 @49 _can_tx +1
  76 0104 33040000 		.word aaa +1 @50 _can_rx0 +1
  77 0108 33040000 		.word aaa +1 @51 _can_rx1 +1
  78 010c 33040000 		.word aaa +1 @52 _can_sce +1
  79              	_start:
  80              	__shizhong:
  81 0110 C84A     		ldr r2, = 0x40022000   @FLASH访问控制
  82 0112 3321     		movs r1, # 0x33
  83 0114 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
  84 0116 C848     		ldr r0, = 0x40021000 @ rcc
  85 0118 4FF00111 		ldr r1, = 0x10001
  86 011c 0160     		str r1, [r0]
  87              	__denghse:
  88 011e 0168     		ldr r1, [r0]
  89 0120 8903     		lsls r1, r1, # 14
  90 0122 FCD5     		bpl __denghse
  91              	__dengpllguan:
  92 0124 0168     		ldr r1, [r0]
  93 0126 8901     		lsls r1, r1, # 6
  94 0128 FCD4     		bmi __dengpllguan
  95 012a C449     		ldr r1, = 0x390002
  96 012c 0046     		mov r0, r0
  97 012e 4160     		str r1, [r0, # 0x04]
  98 0130 0046     		mov r0, r0
  99 0132 C349     		ldr r1, = 0x1010000
 100 0134 0046     		mov r0, r0
 101 0136 0160     		str r1, [r0]
 102              	
 103              	__dengpll:
 104 0138 0168     		ldr r1, [r0]
 105 013a 8901     		lsls r1, # 6
 106 013c FCD5     		bpl __dengpll
 107              	__waishe_shizhong:
 108              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 109              		@外设时钟
 110              		@rcc_ahbpclken  0x40021014
 111              		@0=dma,2=sram,4=flitf,6=crc,7=pa,8=pb,9=pc,10=pd,12=adc
 112              		@rcc_apb2pclken 0x40021018
 113              		@0=afio,1=beeper,11=tim1,12=spi1,13=tim8,14=usart1,17=uart3,19=spi2
 114              		@rcc_apb1pclken 0x4002101c
ARM GAS  1.s 			page 3


 115              		@0=tim2,1=tim3,2=tim4,3=tim5,4=tim6,6=comp,7=compfilt,11wwdg,
 116              		@17=usart2,21=i2c1,22=i2c2,25=can,28=pwr
 117              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 118 013e 41F29571 		movw r1, # 0x1795
 119 0142 4161     		str r1, [r0, # 0x14]
 120 0144 41F60001 		movw r1, # 0x1800
 121 0148 8161     		str r1, [r0, # 0x18]
 122 014a 43F60041 		movw r1, # 0x3c00
 123 014e C162     		str r1, [r0, # 0x2c]
 124 0150 0121     		movs r1, # 0x01
 125 0152 C0F88010 		str r1, [r0, # 0x80]
 126              	
 127              	__io_shezhi:
 128              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 129              		@   pa=0x40023400,    pb=0x40023800,  pc=0x40023c00,  pd=0x40024000
 130              	        @0x00 端口模式寄存器(GPIOx_PMODE)
 131              		@寄存器复位值
 132              		@pa=0xabffffff  pb= 0xfffffebf  pc= 0xfc000000   pd=0xff000000
 133              		@00=输入模式，01=通用输出模式，10=复用功能模式，11模拟功能模式
 134              		@0x04 端口类型定义寄存器(GPIOx_POTYPE) 复位值0
 135              		@ 0=推挽输出，1=开漏输出
 136              		@0x08 翻转率配置寄存器(GPIOx_SR)
 137              		@复位值，PA=0XFFFF，PB=0XFFFF，PC=0XE000,PD=0XF001
 138              		@0=快速，1=慢速
 139              		@0x0c 端口上下拉寄存器(GPIOx_PUPD)
 140              		@寄存器复位值
 141              		@pa=0x64000000,pb=0x100,pc=0,pd=0x02
 142              		@00=无上拉下拉，01=上拉，10=下拉
 143              		@0x10 端口输入数据寄存器(GPIOx_PID)
 144              		@0x14 端口输出数据寄存器(GPIOx_POD)
 145              		@0x18 GPIO 端口位设置/清除寄存器(GPIOx_PBSC)
 146              		@高16位 pbcy = 1 IO低,  低16位 pbsy = 1 IO高
 147              		@0x1c 端口锁定配置寄存器(GPIOx_PLOCK)
 148              		@高16 PLOCKK=1端口配置锁键位被激活
 149              		@低16 PLOCKY=1锁定端口的配置
 150              		@0x20 复用功能低配置寄存器(GPIOx_AFL)
 151              		@0x24复用功能高配置寄存器(GPIOx_AFH)
 152              		@af0=0000,af1=0001,af2=0010,af3=0011...................
 153              		@0x28 端口位清除寄存器(GPIOx_PBC)
 154              		@pbcy=1 清除对应的 PODy 位为 0
 155              		@0x2c 驱动能力配置寄存器(GPIOx_DS)
 156              		@复位值
 157              		@PA=0X55555555,PB=0X55555555,PC=0X54000000,PD=0X55000001
 158              		@00=2mA,01=8mA,10=4mA,11=12mA
 159              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 160              		@PA
 161 0156 BB48     		ldr r0, = 0x40023400
 162 0158 BB49     		ldr r1, = 0x6bfefffd
 163 015a 0160     		str r1, [r0]
 164 015c 4FF6FF61 		movw r1, # 0xfeff
 165 0160 8160     		str r1, [r0, # 0x08]
 166 0162 4FF01051 		ldr r1, = 0x24000000
 167 0166 C160     		str r1, [r0, # 0x0c]
 168 0168 4FF00301 		ldr r1, = 0x03
 169 016c 4162     		str r1, [r0, # 0x24]
 170              		@PB
 171 016e B748     		ldr r0, = 0x40023800
ARM GAS  1.s 			page 4


 172 0170 6FF4C861 		ldr r1, = 0xfffff9bf
 173 0174 0160     		str r1, [r0]
 174 0176 0021     		movs r1, # 0
 175 0178 C160     		str r1, [r0, # 0x0c]
 176 017a 4FF48111 		ldr r1, = 0x102000
 177 017e 0162     		str r1, [r0, # 0x20]
 178              	
 179              	
 180              	__dma_chushihua:
 181 0180 B348     		ldr r0, = 0x40020000
 182 0182 0021     	        movs r1, # 0
 183 0184 8160     		str r1, [r0, # 0x08]
 184 0186 B349     		ldr r1, = 0x4002084c
 185 0188 0161     		str r1, [r0, # 0x10]
 186 018a B349     		ldr r1, = dianyabiao
 187 018c 4161     		str r1, [r0, # 0x14]
 188 018e 4FF47A71 		ldr r1, = 1000
 189 0192 C160     		str r1, [r0, # 0x0c]
 190 0194 43F2A151 		ldr r1, = 0x35a1 @  0x583        @ 5a1
 191 0198 8160     		str r1, [r0, # 0x08]
 192              		
 193              	
 194              	__tim1_chushiha:
 195 019a B048     		ldr r0, = 0x40012c00 @ tim1_cr1
 196 019c 0021     		movs r1, # 0
 197 019e 8162     		str r1, [r0, # 0x28] @ psc
 198 01a0 4FF47A41 		ldr r1, = 64000
 199 01a4 C162     		str r1, [r0, # 0x2c] @ ARR
 200 01a6 4FF06801 		ldr r1, = 0x68
 201 01aa 8161     		str r1, [r0, # 0x18] @ ccmr2  CC3
 202 01ac 4FF00101 		ldr r1, = 0x01    @  CC3
 203 01b0 0162     		str r1, [r0, # 0x20] @ ccer
 204 01b2 4FF40041 		ldr r1, = 0x8000
 205 01b6 4164     		str r1, [r0, # 0x44] @ BDTR
 206 01b8 4FF08101 		ldr r1, = 0x81
 207 01bc 0160     		str r1, [r0]
 208              		
 209              		
 210              	__adc_chushihua:
 211 01be A848     		ldr r0, = 0x40020800
 212 01c0 A849     		ldr r1, =  0x800001
 213 01c2 8160     		str r1, [r0, # 0x08]
 214 01c4 4FF6FF71 		ldr r1, = 0xffff
 215              	__adc_yanshi:
 216 01c8 0139     		subs r1, r1, # 1
 217 01ca FDD1     		bne __adc_yanshi
 218 01cc 1121     		movs r1, # 17
 219 01ce 4163     		str r1, [r0, # 0x34]
 220 01d0 A549     		ldr r1, = 0x800103
 221 01d2 8160     		str r1, [r0, # 0x08]
 222 01d4 8160     		str r1, [r0, # 0x08]
 223              		
 224              	
 225              	__spi_chushihua:
 226 01d6 A548     		ldr r0, = 0x40013000	
 227 01d8 44F26C31 		movw r1, # 0x436c
 228 01dc 0160     		str r1, [r0]
ARM GAS  1.s 			page 5


 229              	
 230              	__lcd_chushihua:
 231 01de A448     		ldr r0,  = 0x40023418
 232 01e0 48F20001 		movw r1, # 0x8000
 233 01e4 0160     		str r1, [r0]		@RST=1
 234 01e6 A34A     		ldr r2, = 0x1ffff
 235 01e8 00F09AF8 		bl __lcd_yanshi
 236              		
 237 01ec 0904     		lsls r1, r1, # 16
 238 01ee 0160     		str r1, [r0]		@RST=0
 239 01f0 A04A     		ldr r2, = 0x1ffff
 240 01f2 00F095F8 		bl __lcd_yanshi
 241              		
 242 01f6 090C     		lsrs r1, r1, # 16
 243 01f8 0160     		str r1, [r0]		@RST=1
 244 01fa 9E4A     		ldr r2, = 0x1ffff
 245 01fc 00F090F8 		bl __lcd_yanshi
 246              	
 247 0200 9D48     		ldr r0, = 0x40023818
 248 0202 1021     		movs r1, # 0x10
 249 0204 0904     		lsls r1, r1, # 16
 250 0206 0160     		str r1, [r0]		@RS=0
 251 0208 9A4A     		ldr r2, = 0x1ffff
 252 020a 00F089F8 		bl __lcd_yanshi
 253              	
 254 020e A220     		movs r0, # 0xa2		@ 偏置选择
 255 0210 00F050F8 		bl __xie_spi1
 256 0214 A020     		movs r0, # 0xa0		@SEG方向（横 0=0到131，1=131到0）
 257 0216 00F04DF8 		bl __xie_spi1
 258 021a C820     		movs r0, # 0xc8		@选择COM方向（竖 0=0到63, 1=63到1）
 259 021c 00F04AF8 		bl __xie_spi1
 260 0220 2F20     		movs r0, # 0x2f		@选择调节率
 261 0222 00F047F8 		bl __xie_spi1
 262 0226 8120     		movs r0, # 0x81		@设置EV命令
 263 0228 00F044F8 		bl __xie_spi1
 264 022c 3020     		movs r0, # 0x30		@设置EV（0x00-0x3f 对比度）
 265 022e 00F041F8 		bl __xie_spi1
 266 0232 2F20     		movs r0, # 0x2f		@助推器开启
 267 0234 00F03EF8 		bl __xie_spi1		@调节器开、追踪器开
 268 0238 AF20     		movs r0, # 0xaf		@显示开
 269 023a 00F03BF8 		bl __xie_spi1
 270              		
 271 023e 00F072F8 		bl __lcd_qingping
 272              	
 273              	
 274              	
 275              	
 276              	
 277              	
 278              	
 279              	
 280              	adc:
 281 0242 8E48     		ldr r0, = 0x20000200
 282 0244 B0F84C00 		ldrh r0, [r0, # 0x4c]
 283 0248 0821     	        movs r1, # 8
 284 024a 8D4A     		ldr r2, = asciibiao
 285 024c FF23     		movs r3, # 0xff
ARM GAS  1.s 			page 6


 286 024e 00F0D8F8 		bl _zhuanascii
 287 0252 0820     		movs r0, # 8            @写几个字
 288 0254 3021     		movs r1, # 48           @字库单字长度
 289 0256 0322     		movs r2, # 3            @宽度
 290 0258 8A4B     		ldr r3, =  0x100b2              @lcd位置
 291 025a 00F0ACF8 		bl __xie_lcd_ascii
 292              		
 293              		
 294 025e F0E7     		b adc
 295              	
 296              	
 297              	
 298              	
 299              	
 300              	
 301              	
 302              	
 303              		
 304 0260 8948     		ldr r0, = 0x20000100
 305 0262 0021     		movs r1, # 0
 306 0264 0160     		str r1, [r0]
 307              	__ting:
 308 0266 8248     		ldr r0, = 0x40023418
 309 0268 0122     		movs r2, # 0x01
 310 026a 1346     		mov r3, r2
 311 026c 0260     		str r2, [r0] @开
 312 026e 1B04     		lsls r3, r3,  # 16
 313 0270 6FF07F41 		ldr r1, = 0xffffff
 314              	__led_kai_yanshi:
 315 0274 0139     		subs r1, r1, # 1
 316 0276 FDD1     		bne __led_kai_yanshi
 317 0278 6FF07F41 		ldr r1, = 0xffffff
 318 027c 0360     		str r3, [r0] @关
 319              	__led_guan_yanshi:
 320 027e 0139     		subs r1, r1, # 1
 321 0280 FDD1     		bne __led_guan_yanshi
 322 0282 00F001F8 		bl __jishu_shiyan
 323 0286 EEE7     		b __ting
 324              	
 325              	__jishu_shiyan:
 326 0288 1FB5     		push {r0-r4,lr}
 327 028a 804C     		ldr r4, = 12345678
 328 028c 7E4B     	        ldr r3, = 0x20000100
 329 028e 1868     		ldr r0, [r3]
 330 0290 0130     		adds r0, r0, # 1
 331 0292 1860     		str r0, [r3]
 332 0294 A042     		cmp r0, r4
 333 0296 01D1     		bne __xianshi_shuzi
 334 0298 0020     		movs r0, # 0
 335 029a 1860     		str r0, [r3]
 336              	__xianshi_shuzi:	
 337 029c 0821     		movs r1, # 8
 338 029e 784A     		ldr r2, = asciibiao
 339 02a0 FF23     		movs r3, # 0xff
 340 02a2 00F0AEF8 		bl _zhuanascii
 341 02a6 0820     		movs r0, # 8            @写几个字
 342 02a8 3021     		movs r1, # 48           @字库单字长度
ARM GAS  1.s 			page 7


 343 02aa 0322     		movs r2, # 3            @宽度
 344 02ac 754B     		ldr r3, =  0x100b2              @lcd位置
 345 02ae 00F082F8 		bl __xie_lcd_ascii
 346 02b2 1FBD     		pop {r0-r4,pc}
 347              	
 348              	
 349              	__xie_spi1:
 350 02b4 30B5     		push {r4-r5,lr}
 351 02b6 6D4C     		ldr r4, = 0x40013000
 352 02b8 00F006F8 		bl __spi_mang
 353 02bc 2073     		strb r0, [r4,0x0c]
 354 02be 40F2FF34 		ldr r4, = 0x3ff
 355              	__xie_spi1_yanshi:
 356 02c2 013C     		subs r4, r4, # 1
 357 02c4 FDD1     		bne __xie_spi1_yanshi
 358 02c6 30BD     		pop {r4-r5,pc}
 359              		
 360              	__spi_mang:
 361 02c8 A568     		ldr r5, [r4,0x08]
 362 02ca 2D06     		lsls r5, r5, # 24
 363 02cc FCD4     		bmi __spi_mang
 364 02ce 7047     		bx lr
 365              	
 366              	__xie_lcd_ye:
 367              		@入口R0=数据首地址
 368 02d0 1EB5     		push {r1-r4,lr}
 369 02d2 B023     		movs r3, # 0xb0
 370 02d4 013B     		subs r3, r3, # 1
 371 02d6 0446     		mov r4, r0
 372              	__ye_jia:
 373 02d8 6748     		ldr r0, = 0x40023818
 374 02da 1021     		movs r1, # 0x10
 375 02dc 0904     		lsls r1, r1, # 16
 376 02de 0160     		str r1, [r0]            @RS=0
 377 02e0 4FF0FF02 		ldr r2, = 0xff
 378 02e4 00F01CF8 		bl __lcd_yanshi
 379 02e8 0133     		adds r3, r3, # 1
 380 02ea B92B     		cmp r3, # 0xb9
 381 02ec 00D1     		bne __xie_ye_dizhi
 382 02ee 1EBD     		pop {r1-r4,pc}
 383              		@       movs r3, # 0xb0
 384              		@       mvns r4, r4
 385              		@       lsls r4, r4, # 24
 386              		@       lsrs r4, r4, # 24
 387              	__xie_ye_dizhi:
 388 02f0 1020     		movs r0, # 0x10
 389 02f2 FFF7DFFF 		bl __xie_spi1
 390 02f6 0020     		movs r0, # 0
 391 02f8 FFF7DCFF 		bl __xie_spi1
 392 02fc 1846     		mov r0, r3
 393 02fe FFF7D9FF 		bl __xie_spi1
 394              	
 395 0302 5D48     		ldr r0, = 0x40023818
 396 0304 1021     		movs r1, # 0x10
 397 0306 0160     		str r1, [r0]            @RS=1
 398 0308 4FF0FF02 		ldr r2, = 0xff
 399 030c 00F008F8 		bl __lcd_yanshi
ARM GAS  1.s 			page 8


 400              	
 401 0310 8421     		movs r1, # 132
 402              	__heng_sao:
 403 0312 2078     		ldrb r0, [r4]
 404              		@       mov r0, r4
 405 0314 FFF7CEFF 		bl __xie_spi1
 406 0318 0134     		adds r4, r4, # 1
 407 031a 0139     		subs r1, r1, # 1
 408 031c F9D1     		bne __heng_sao
 409 031e DBE7     		b __ye_jia
 410              	__lcd_yanshi:
 411 0320 013A     		subs r2, r2, # 1
 412 0322 FDD1     		bne __lcd_yanshi
 413 0324 7047     		bx lr
 414              	__lcd_qingping:
 415 0326 1FB5     		push {r0-r4,lr}
 416 0328 B023     		movs r3, # 0xb0
 417 032a 013B     		subs r3, r3, # 1
 418 032c 4FF00004 		mov r4, # 0
 419              	__ye_jia1:
 420 0330 5148     		ldr r0, = 0x40023818
 421 0332 1021     		movs r1, # 0x10
 422 0334 0904     		lsls r1, r1, # 16
 423 0336 0160     		str r1, [r0]            @RS=0
 424 0338 4FF0FF02 		ldr r2, = 0xff
 425 033c FFF7F0FF 		bl __lcd_yanshi
 426 0340 0133     		adds r3, r3, # 1
 427 0342 B92B     		cmp r3, # 0xb9
 428 0344 00D1     		bne __xie_ye_dizhi1
 429 0346 1FBD     		pop {r0-r4,pc}
 430              	__xie_ye_dizhi1:
 431 0348 1020     		movs r0, # 0x10
 432 034a FFF7B3FF 		bl __xie_spi1
 433 034e 0020     		movs r0, # 0
 434 0350 FFF7B0FF 		bl __xie_spi1
 435 0354 1846     		mov r0, r3
 436 0356 FFF7ADFF 		bl __xie_spi1
 437              	
 438 035a 4748     		ldr r0, = 0x40023818
 439 035c 1021     		movs r1, # 0x10
 440 035e 0160     		str r1, [r0]            @RS=1
 441 0360 4FF0FF02 		ldr r2, = 0xff
 442 0364 FFF7DCFF 		bl __lcd_yanshi
 443 0368 8421     		movs r1, # 132
 444              	__heng_sao1:
 445 036a 2046     		mov r0, r4
 446 036c FFF7A2FF 		bl __xie_spi1
 447 0370 0139     		subs r1, r1, # 1
 448 0372 FAD1     		bne __heng_sao1
 449 0374 DCE7     		b __ye_jia1
 450              		
 451              	__xie_lcd_weizhi:
 452              		@入口R0=要写的地址(低16=X，高16=Y=（0-131(r5=高4,R4=低4))
 453 0376 3EB5     		push {r1-r5,lr}
 454 0378 0546     		mov r5, r0
 455 037a 0446     		mov r4, r0
 456 037c 0004     		lsls r0, r0, # 16
ARM GAS  1.s 			page 9


 457 037e 000C     		lsrs r0, r0, # 16
 458 0380 2D0D     		lsrs r5, r5, # 20	@高4
 459 0382 2403     		lsls r4, r4, # 12
 460 0384 240F     		lsrs r4, r4, # 28
 461 0386 3C49     	        ldr r1, = 0x40023818
 462 0388 1023     		movs r3, # 0x10
 463 038a 1B04     		lsls r3, r3, # 16
 464 038c 0B60     		str r3, [r1]            @RS=0
 465 038e 4FF0FF02 		ldr r2, = 0xff
 466 0392 FFF7C5FF 		bl __lcd_yanshi
 467 0396 FFF78DFF 		bl __xie_spi1
 468              		
 469 039a 1020     		movs r0, # 0x10
 470 039c 2843     		orrs r0, r0, r5
 471 039e FFF789FF 		bl __xie_spi1
 472              		
 473 03a2 2046     		mov r0, r4
 474 03a4 FFF786FF 		bl __xie_spi1
 475 03a8 1023     		movs r3, # 0x10
 476 03aa 0B60     		str r3, [r1]            @RS=1
 477 03ac 4FF0FF02 		ldr r2, = 0xff
 478 03b0 FFF7B6FF 		bl __lcd_yanshi
 479 03b4 3EBD     		pop {r1-r5,pc}
 480              	
 481              	
 482              	__xie_lcd_ascii:
 483 03b6 2DE9F04F 		push {r4-r11,lr}
 484              		@入口r0=写几个字
 485              		@r1=字库单字长度
 486              		@r2=y宽（几行）
 487              		@r3=要写的地址
 488 03ba 314D     		ldr r5, = asciibiao
 489 03bc 9946     		mov r9, r3
 490 03be 0026     		movs r6, # 0
 491 03c0 3746     		mov r7, r6
 492 03c2 8246     		mov r10, r0
 493 03c4 9346     		mov r11, r2	
 494 03c6 4A43     		muls r2, r2, r1
 495 03c8 9046     		mov r8, r2
 496              	__xie_lcd_dizhi:
 497 03ca 4846     		mov r0, r9
 498 03cc FFF7D3FF 		bl __xie_lcd_weizhi
 499              	__du_ascii:
 500 03d0 A85D     		ldrb r0, [r5, r6]
 501              					@subs r0, r0, # 32	@字库偏移
 502 03d2 4843     		muls r0, r0, r1
 503 03d4 2E4B     		ldr r3, = da_alabo_shuzi
 504 03d6 0344     		add r3, r3, r0
 505 03d8 DB19     		adds r3, r3, r7
 506              	__du_ziku_16_chushihua:
 507 03da 0024     		movs r4, # 0
 508              	__du_ziku_16:
 509 03dc 185D     		ldrb r0, [r3, r4]
 510 03de 0334     		adds r4, r4, # 3
 511 03e0 8C42     		cmp r4, r1
 512 03e2 03D0     		beq __duwan_16
 513 03e4 FFF766FF 		bl __xie_spi1
ARM GAS  1.s 			page 10


 514 03e8 0046     		mov r0, r0
 515 03ea F7E7     		b __du_ziku_16
 516              	__duwan_16:
 517 03ec 0136     		adds r6, r6, # 1
 518 03ee 5645     		cmp r6, r10
 519 03f0 EED1     		bne __du_ascii
 520 03f2 0026     		movs r6, # 0
 521 03f4 0137     		adds r7, r7, # 1	@字库地址偏移
 522 03f6 19F10109 		adds r9, r9, # 1	@Y偏移
 523 03fa 5F45     		cmp r7, r11	
 524 03fc E5D1     		bne __xie_lcd_dizhi
 525 03fe BDE8F08F 		pop {r4-r11,pc}
 526              	_zhuanascii:							@ 16进制转ASCII
 527              		@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 528 0402 F0B5     		push {r4-r7,lr}
 529 0404 1F46     		mov r7, r3
 530 0406 0546     		mov r5, r0
 531 0408 0E46     		mov r6, r1
 532 040a 0A21     		movs r1, # 10
 533              	_xunhuanqiuma:
 534 040c B0FBF1F0 		udiv r0, r0, r1
 535 0410 0446     		mov r4, r0
 536 0412 4C43     		muls r4, r1
 537 0414 2B1B     		subs r3, r5, r4
 538              	@	adds r3, r3, # 0x30	@ascii偏移
 539 0416 0546     		mov r5, r0
 540 0418 013E     		subs r6, r6, # 1
 541 041a 08D0     		beq _qiumafanhui
 542 041c BE42     		cmp r6, r7
 543 041e 02D1     		bne _meidaoxiaoshudian
 544 0420 2E24     		movs r4, # 0x2e		@小数点
 545 0422 9455     		strb r4, [r2,r6]	@插入小数点
 546 0424 013E     		subs r6, r6, # 1
 547              	_meidaoxiaoshudian:
 548 0426 9355     		strb r3, [r2,r6]
 549 0428 3600     		movs r6, r6
 550 042a EFD1     		bne _xunhuanqiuma
 551 042c F0BD     		pop {r4-r7,pc}
 552              	_qiumafanhui:
 553 042e 9355     		strb r3, [r2, r6]
 554 0430 F0BD     		pop {r4-r7,pc}
 555              	_nmi_handler:	
 556              	_hard_fault:	
 557              	_memory_fault:	
 558              	_bus_fault:	
 559              	_usage_fault:
 560              	aaa:
 561 0432 7047     		bx lr
 562 0434 00200240 		.ltorg
 562      00100240 
 562      02003900 
 562      00000101 
 562      00340240 
 563              		.section .data
 564              		.equ STACHINIT,         0x20004000      @堆栈顶
 565              		.equ asciibiao,		0x20000000	@ASCII表
 566              		.equ dianyabiao,	0x20000200	@电压表
ARM GAS  1.s 			page 11


 567              		.align 4
 568              	da_alabo_shuzi:
 569 0000 00000080 		.byte 0x00, 0x00, 0x00, 0x80, 0xFF, 0x01, 0xE0, 0xFF, 0x07, 0xF8, 0xFF, 0x1F, 0x78, 0x00, 0x1E, 0x
 569      FF01E0FF 
 569      07F8FF1F 
 569      78001E1C 
 569      00380C00 
 570 0030 00000000 		.byte 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x30, 0x60, 0x00, 0x30, 0x
 570      00000000 
 570      00600030 
 570      60003060 
 570      00307000 
 571 0060 00000038 		.byte 0x00, 0x00, 0x00, 0x38, 0x00, 0x38, 0x18, 0x00, 0x3C, 0x1C, 0x00, 0x3E, 0x0C, 0x00, 0x37, 0x
 571      00381800 
 571      3C1C003E 
 571      0C00370C 
 571      80330CC0 
 572 0090 00000000 		.byte 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x38, 0x00, 0x18, 0x18, 0x00, 0x38, 0x1C, 0x00, 0x30, 0x
 572      001C3800 
 572      18180038 
 572      1C00300C 
 572      00300C0C 
 573 00c0 00F00000 		.byte 0x00, 0xF0, 0x00, 0x00, 0xF8, 0x00, 0x00, 0xDC, 0x00, 0x00, 0xCE, 0x00, 0x00, 0xC7, 0x00, 0x
 573      F80000DC 
 573      0000CE00 
 573      00C700C0 
 573      C100E0C0 
 574 00f0 00000000 		.byte 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0xFC, 0x07, 0x18, 0xFC, 0x07, 0x38, 0xFC, 0x07, 0x30, 0x
 574      001CFC07 
 574      18FC0738 
 574      FC07300C 
 574      06300C06 
 575 0120 00000000 		.byte 0x00, 0x00, 0x00, 0x00, 0xFE, 0x01, 0xC0, 0xFF, 0x07, 0xE0, 0xFF, 0x1F, 0xF0, 0x0C, 0x1E, 0x
 575      FE01C0FF 
 575      07E0FF1F 
 575      F00C1E38 
 575      04381806 
 576 0150 0000000C 		.byte 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x0C, 0x00, 0x20, 0x0C, 0x00, 0x38, 0x
 576      00000C00 
 576      000C0020 
 576      0C00380C 
 576      003E0CC0 
 577 0180 00000000 		.byte 0x00, 0x00, 0x00, 0x00, 0xC0, 0x07, 0xE0, 0xE1, 0x0F, 0xF8, 0xF3, 0x1F, 0xF8, 0x3F, 0x1C, 0x
 577      C007E0E1 
 577      0FF8F31F 
 577      F83F1C1C 
 577      0F380C0E 
 578 01b0 000000C0 		.byte 0x00, 0x00, 0x00, 0xC0, 0x0F, 0x00, 0xF0, 0x1F, 0x00, 0xF8, 0x3F, 0x38, 0x38, 0x78, 0x30, 0x
 578      0F00F01F 
 578      00F83F38 
 578      3878301C 
 578      70300C60 
 579              		
 580              	
 581              		
 582              		
 583              		.align 4
ARM GAS  1.s 			page 12


 584              	yjmwxwx:
 585 01e0 796A6D77 		.ascii "yjmwxwxWWW"
 585      78777857 
 585      5757
 586              	n32g430:
 587 01ea 6E333267 		.ascii "n32g430"
 587      343330
 588              	_21ic.com:
 589 01f1 32314943 		.ascii "21IC.com"
 589      2E636F6D 
 590              	nations:
 591 01f9 4E617469 		.ascii "Nations"
 591      6F6E73
ARM GAS  1.s 			page 13


DEFINED SYMBOLS
                 1.s:9      .text:0000000000000000 vectors
                            *ABS*:0000000020004000 STACHINIT
                 1.s:79     .text:0000000000000110 _start
                 1.s:555    .text:0000000000000432 _nmi_handler
                 1.s:556    .text:0000000000000432 _hard_fault
                 1.s:557    .text:0000000000000432 _memory_fault
                 1.s:558    .text:0000000000000432 _bus_fault
                 1.s:559    .text:0000000000000432 _usage_fault
                 1.s:560    .text:0000000000000432 aaa
                 1.s:80     .text:0000000000000110 __shizhong
                            .text:0000000000000000 $d
                 1.s:81     .text:0000000000000110 $t
                 1.s:87     .text:000000000000011e __denghse
                 1.s:91     .text:0000000000000124 __dengpllguan
                 1.s:103    .text:0000000000000138 __dengpll
                 1.s:107    .text:000000000000013e __waishe_shizhong
                 1.s:127    .text:0000000000000156 __io_shezhi
                 1.s:180    .text:0000000000000180 __dma_chushihua
                            *ABS*:0000000020000200 dianyabiao
                 1.s:194    .text:000000000000019a __tim1_chushiha
                 1.s:210    .text:00000000000001be __adc_chushihua
                 1.s:215    .text:00000000000001c8 __adc_yanshi
                 1.s:225    .text:00000000000001d6 __spi_chushihua
                 1.s:230    .text:00000000000001de __lcd_chushihua
                 1.s:410    .text:0000000000000320 __lcd_yanshi
                 1.s:349    .text:00000000000002b4 __xie_spi1
                 1.s:414    .text:0000000000000326 __lcd_qingping
                 1.s:280    .text:0000000000000242 adc
                            *ABS*:0000000020000000 asciibiao
                 1.s:526    .text:0000000000000402 _zhuanascii
                 1.s:482    .text:00000000000003b6 __xie_lcd_ascii
                 1.s:307    .text:0000000000000266 __ting
                 1.s:314    .text:0000000000000274 __led_kai_yanshi
                 1.s:319    .text:000000000000027e __led_guan_yanshi
                 1.s:325    .text:0000000000000288 __jishu_shiyan
                 1.s:336    .text:000000000000029c __xianshi_shuzi
                 1.s:360    .text:00000000000002c8 __spi_mang
                 1.s:355    .text:00000000000002c2 __xie_spi1_yanshi
                 1.s:366    .text:00000000000002d0 __xie_lcd_ye
                 1.s:372    .text:00000000000002d8 __ye_jia
                 1.s:387    .text:00000000000002f0 __xie_ye_dizhi
                 1.s:402    .text:0000000000000312 __heng_sao
                 1.s:419    .text:0000000000000330 __ye_jia1
                 1.s:430    .text:0000000000000348 __xie_ye_dizhi1
                 1.s:444    .text:000000000000036a __heng_sao1
                 1.s:451    .text:0000000000000376 __xie_lcd_weizhi
                 1.s:496    .text:00000000000003ca __xie_lcd_dizhi
                 1.s:499    .text:00000000000003d0 __du_ascii
                 1.s:568    .data:0000000000000000 da_alabo_shuzi
                 1.s:506    .text:00000000000003da __du_ziku_16_chushihua
                 1.s:508    .text:00000000000003dc __du_ziku_16
                 1.s:516    .text:00000000000003ec __duwan_16
                 1.s:533    .text:000000000000040c _xunhuanqiuma
                 1.s:552    .text:000000000000042e _qiumafanhui
                 1.s:547    .text:0000000000000426 _meidaoxiaoshudian
                 1.s:562    .text:0000000000000434 $d
ARM GAS  1.s 			page 14


                 1.s:567    .data:0000000000000000 $d
                 1.s:584    .data:00000000000001e0 yjmwxwx
                 1.s:586    .data:00000000000001ea n32g430
                 1.s:588    .data:00000000000001f1 _21ic.com
                 1.s:590    .data:00000000000001f9 nations

NO UNDEFINED SYMBOLS
